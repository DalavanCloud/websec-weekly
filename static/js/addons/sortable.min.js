/*! UIkit 2.10.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){var b;jQuery&&jQuery.UIkit&&(b=a(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return b||a(jQuery,jQuery.UIkit)})}(function(a,b){"use strict";function c(a,b){var c=a.parentNode;if(b.parentNode!=c)return!1;for(var d=a.previousSibling;d&&9!==d.nodeType;){if(d===b)return!0;d=d.previousSibling}return!1}function d(a,b){var c=b;if(c==a)return null;for(;c;){if(c.parentNode===a)return c;if(c=c.parentNode,!c||!c.ownerDocument||11===c.nodeType)break}return null}function e(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}var f,g,h,i,j,k="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,l=!k&&function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}();return l=!1,b.component("sortable",{defaults:{warp:!1,animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",dragCustomClass:"",handleClass:!1,stop:function(){},start:function(){},change:function(){}},init:function(){function b(b){return function(c){var e=k&&c.touches&&c.touches[0]||{},f=e.target||c.target;if(k&&document.elementFromPoint&&(f=document.elementFromPoint(c.pageX-document.body.scrollLeft,c.pageY-document.body.scrollTop)),a(f).hasClass(n.options.childClass))b.apply(f,[c]);else if(f!==o){var g=d(o,f);g&&b.apply(g,[c])}}}function c(){l||(k?o.addEventListener("touchmove",x,!1):(o.addEventListener("mouseover",t,!1),o.addEventListener("mouseout",u,!1)),o.addEventListener(k?"touchend":"mouseup",v,!1),document.addEventListener(k?"touchend":"mouseup",w,!1),document.addEventListener("selectstart",e,!1))}function m(){l||(k?o.removeEventListener("touchmove",x,!1):(o.removeEventListener("mouseover",t,!1),o.removeEventListener("mouseout",u,!1)),o.removeEventListener(k?"touchend":"mouseup",v,!1),document.removeEventListener(k?"touchend":"mouseup",w,!1),document.removeEventListener("selectstart",e,!1))}var n=this,o=this.element[0],p=null,q=null;l?this.element.children().attr("draggable","true"):this.element.on("mousedown touchstart","a[href]",function(b){b.ctrlKey||b.metaKey||b.shiftKey||(i=a(this))}).on("click","a[href]",function(b){return b.ctrlKey||b.metaKey||b.shiftKey?void 0:(i=a(this),b.stopImmediatePropagation(),!1)});var r=b(function(b){g=!1,h=!1;{var d=a(b.target);n.element.children()}if(k||2!=b.button){if(n.options.handleClass){var e=d.hasClass(n.options.handleClass)?d:d.closest("."+n.options.handleClass,o);if(!e.length)return}b.dataTransfer&&(b.dataTransfer.effectAllowed="move",b.dataTransfer.dropEffect="move",b.dataTransfer.setData("Text","*")),p=this,f&&f.remove();var i=a(p),m=i.offset();j={pos:{x:b.pageX,y:b.pageY},threshold:n.options.threshold,apply:function(){f=a('<div class="'+[n.options.draggingClass,n.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:m.top,left:m.left,width:i.width(),height:i.height(),padding:i.css("padding")}).data("mouse-offset",{left:m.left-parseInt(b.pageX,10),top:m.top-parseInt(b.pageY,10)}).append(i.html()).appendTo("body"),f.$current=i,f.$sortable=n,c(),n.options.start(this,p),n.trigger("uk.sortable.start",[n,p]),j=!1}},l||b.preventDefault()}}),s=b(function(a){return p?(a.preventDefault&&a.preventDefault(),!1):!0}),t=b(a.UIkit.Utils.debounce(function(){if(!p||p===this)return!0;var b=n.dragenterData(this);return n.dragenterData(this,b+1),0===b&&(a(this).addClass(n.options.overClass),n.options.warp||n.moveElementNextTo(p,this)),!1}),40),u=b(function(){var b=n.dragenterData(this);n.dragenterData(this,b-1),n.dragenterData(this)||(a(this).removeClass(n.options.overClass),n.dragenterData(this,!1))}),v=b(function(a){if("drop"===a.type&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()),h){if(n.options.warp){var b=p.nextSibling;this.parentNode.insertBefore(p,this),this.parentNode.insertBefore(this,b)}n.options.change(this,p),n.trigger("uk.sortable.change",[n,p])}}),w=function(){p=null,q=null,n.element.children().each(function(){1===this.nodeType&&(a(this).removeClass(n.options.overClass).removeClass(n.options.placeholderClass).removeClass(n.options.childClass),n.dragenterData(this,!1))}),a("html").removeClass(n.options.dragMovingClass),m(),n.options.stop(this),n.trigger("uk.sortable.stop",[n]),f.remove(),f=null},x=b(function(b){return p&&p!==this&&q!==this?(n.element.children().removeClass(n.options.overClass),q=this,n.options.warp?a(this).addClass(n.options.overClass):n.moveElementNextTo(p,this),e(b)):!0});l?(o.addEventListener("dragstart",r,!1),o.addEventListener("dragenter",t,!1),o.addEventListener("dragleave",u,!1),o.addEventListener("drop",v,!1),o.addEventListener("dragover",s,!1),o.addEventListener("dragend",w,!1)):o.addEventListener(k?"touchstart":"mousedown",r,!1)},dragenterData:function(b,c){return b=a(b),1==arguments.length?parseInt(b.attr("data-child-dragenter"),10)||0:void(c?b.attr("data-child-dragenter",Math.max(0,c)):b.removeAttr("data-child-dragenter"))},moveElementNextTo:function(d,e){h=!0;var f=this,g=a(d).parent().css("min-height",""),i=c(d,e)?e:e.nextSibling,j=g.children(),k=j.length;return f.options.warp||!f.options.animation?(e.parentNode.insertBefore(d,i),void b.Utils.checkDisplay(f.element.parent())):(g.css("min-height",g.height()),j.stop().each(function(){var b=a(this),c=b.position();c.width=b.width(),b.data("offset-before",c)}),e.parentNode.insertBefore(d,i),b.Utils.checkDisplay(f.element.parent()),j=g.children().each(function(){var b=a(this);b.data("offset-after",b.position())}).each(function(){var b=a(this),c=b.data("offset-before");b.css({position:"absolute",top:c.top,left:c.left,"min-width":c.width})}),void j.each(function(){var c=a(this),d=(c.data("offset-before"),c.data("offset-after"));c.css("pointer-events","none").width(),setTimeout(function(){c.animate({top:d.top,left:d.left},f.options.animation,function(){c.css({position:"",top:"",left:"","min-width":"","pointer-events":""}).removeClass(f.options.overClass).attr("data-child-dragenter",""),k--,k||(g.css("min-height",""),b.Utils.checkDisplay(f.element.parent()))})},0)}))}}),b.ready(function(c){a("[data-uk-sortable]",c).each(function(){var c=a(this);if(!c.data("sortable")){b.sortable(c,b.Utils.options(c.attr("data-uk-sortable")))}})}),a("html").on("mousemove touchmove",function(c){if(j){var d=c.originalEvent.targetTouches?c.originalEvent.targetTouches[0]:c;(Math.abs(d.pageX-j.pos.x)>j.threshold||Math.abs(d.pageY-j.pos.y)>j.threshold)&&j.apply()}if(f){g||(g=!0,f.show(),f.$current.addClass(f.$sortable.options.placeholderClass),f.$sortable.element.children().addClass(f.$sortable.options.childClass),a("html").addClass(f.$sortable.options.dragMovingClass));var e=f.data("mouse-offset"),h=parseInt(c.originalEvent.pageX,10)+e.left,i=parseInt(c.originalEvent.pageY,10)+e.top;f.css({left:h,top:i}),i<b.$win.scrollTop()?b.$win.scrollTop(b.$win.scrollTop()-Math.ceil(f.height()/2)):i+f.height()>window.innerHeight+b.$win.scrollTop()&&b.$win.scrollTop(b.$win.scrollTop()+Math.ceil(f.height()/2))}}),b.$doc.on("mouseup touchend",function(){!g&&i&&(location.href=i.attr("href")),j=i=!1}),b.sortable});